<h1 *ngIf="isDemo" class="mat-display-1">Create you own test connection</h1>

<div *ngIf="!connections?.length && connections !== null" class="empty-state">
    <h1 *ngIf="(currentUser?.role === 'ADMIN' || currentUser?.role === 'DB_ADMIN') && !isDemo" class="mat-display-1">
        Create your first connection
    </h1>
    <ul class="supportedDatabases">
        <li *ngFor="let supportedDatabase of supportedOrderedDatabases">
            <a routerLink="/connect-db"
                [queryParams]="{ type: supportedDatabase }"
                class="addConnectionLink"
                attr.data-testid="{{supportedDatabase}}-test-connection-list-item">
                <div class="addConnectionLink__iconBox">
                    <mat-icon [svgIcon]="supportedDatabase" class="addConnectionLink__icon"></mat-icon>
                </div>
                <span class="addConnectionLink__label">{{ supportedDatabasesTitles[supportedDatabase] }}</span>
            </a>
        </li>
    </ul>
</div>

<ul class="connections">
    <li *ngFor="let connectionItem of connections | slice:0:displayedCardCount" class="connectionItem">
        <a routerLink="/dashboard/{{connectionItem.connection.id}}" class="connection"
            angulartics2On="click"
            angularticsAction="Connections: open own db is clicked">
            <div  class="connectionLogoPreview">
                <img *ngIf="connectionItem.connection.connection_properties?.logo_url; else noLogo"
                    [src]="connectionItem.connection.connection_properties?.logo_url"
                    class="connectionLogoPreview__logo"
                    [alt]="connectionItem.connection.connection_properties?.company_name">
                <ng-template #noLogo>
                    <img src="../../assets/rocketadmin_logo_white-short.svg"
                        class="connectionLogoPreview__logo"
                        alt="Rocketadmin connection">
                </ng-template>
                <div class="connectionInfo">
                    <h2 class="connectionInfo__connectionTitle">{{ connectionItem.displayTitle }}</h2>
                    <span class="mat-body-2">{{ supportedDatabasesTitles[connectionItem.connection.type] }}</span>
                </div>
            </div>
        </a>
    </li>
</ul>

<button *ngIf="displayedCardCount < connections?.length"
    type="button" mat-button color="accent"
    class="showAllButton" (click)="showMore()">
    Show all
</button>
<button *ngIf="displayedCardCount > 3"
    type="button" mat-button color="accent"
    class="showAllButton" (click)="showLess()">
    Show less
</button>

<div class="fabActions">
    <a mat-flat-button *ngIf="(currentUser?.role === 'ADMIN' || currentUser?.role === 'DB_ADMIN') && connections?.length"
        data-testid="add-connection-button"
        color="primary"
        class="fabAddButton"
        routerLink="/connect-db"
        angulartics2On="click"
        angularticsAction="Connections: Add connection button is clicked">
        <mat-icon *ngIf="connections?.length">add</mat-icon>
        Add database
    </a>
</div>
<!--<a mat-flat-button *ngIf="(currentUser?.role === 'ADMIN' || currentUser?.role === 'DB_ADMIN') && !connections?.length"
    data-testid="add-connection-button"
    color="primary"
    class="addButton"
    routerLink="/connect-db"
    angulartics2On="click"
    angularticsAction="Connections: Add connection button is clicked">
    <mat-icon *ngIf="connections?.length">add</mat-icon>
    Add database
</a>-->

<div *ngIf="!connections?.length && connections !== null && !isDemo" class="empty-state_bottom">
    <p class="mat-body-1 empty-state__text">
        Invited to a company but don't see your admin panel?
    </p>
    <p class="mat-body-1" style="text-align: center;">
        Request access from your Account Owner
    </p>
</div>

